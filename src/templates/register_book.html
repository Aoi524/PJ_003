{% extends 'base.html' %}

{% block title %}書籍の登録{% endblock %}

{% block content %}
<h4>書籍の登録</h4>
<hr class="mt-0 mb-3">
<form {% if not book %} action="/register" {% else %} action="/update/{{ book.id }}" {% endif %} method="POST">
    <div class="mb-2">
        <label for="title" class="form-label fw-bold">タイトル</label>
        <input type="text" class="form-control" id="title" name="title" {% if book %} value="{{ book.title }}" {% endif %}>
    </div>
    <div class="mb-2">
        <label for="author" class="form-label fw-bold">著者</label>
        <input type="text" class="form-control" id="author" name="author" {% if book %} value="{{ book.author }}" {% endif %}>
    </div>
    <div class="mb-2">
        <label for="publisher" class="form-label fw-bold">出版社</label>
        <input type="text" class="form-control" id="publisher" name="publisher" {% if book %} value="{{ book.publisher }}" {% endif %}>
    </div>
    <div class="mb-2">
        <label for="published_date" class="form-label fw-bold">出版日</label>
        <input type="date" class="form-control" id="published_date" name="published_date" {% if book %} value="{{ book.published_date }}" {% endif %}>
    </div>
    <div class="mb-2">
        <label for="isbn" class="form-label fw-bold">ISBN</label>
        <input type="text" class="form-control" id="isbn" name="isbn" {% if book %} value="{{ book.isbn }}" {% endif %}>
    </div>
    <div class="mb-2">
        <label for="status" class="form-label fw-bold">ステータス</label>
        <select class="form-select" id="status" name="status">
            <option value="未読" {% if book and book.status == '未読' %} selected {% endif %}>未読</option>
            <option value="読書中" {% if book and book.status == '読書中' %} selected {% endif %}>読書中</option>
            <option value="読了済み" {% if book and book.status == '読了済み' %} selected {% endif %}>読了済み</option>
        </select>
    </div>
    <div class="mb-2">
        <label for="readed_date" class="form-label fw-bold">読了日</label>
        <input type="date" class="form-control" id="readed_date" name="readed_date" {% if book and book.readed_date != 'None' %} value="{{ book.readed_date }}" {% endif %}>
    </div>
    <div class="container">
        <div class="row justify-content-center my-3">
            <div {%if book%} class="col-4 col-md-3" {% else %} class="col-6 col-md-3" {% endif %}>
                <button type="button" class="btn btn-secondary w-100" onclick="location.href='/'">戻る</button>
            </div>
            <div {%if book%} class="col-4 col-md-3" {% else %} class="col-6 col-md-3" {% endif %}>
                <button type="submit" class="btn btn-primary w-100">{% if book %} 更新 {% else %} 登録 {% endif %}</button>
            </div>
            {% if book %}
            <div class="col-4 col-md-3">
                <button type="button" class="btn btn-danger w-100" onclick="if(confirm('本当に削除しますか？')){ document.getElementById('delete-form').submit(); }">削除</button>
            </div>
            {% endif %}
        </div>
    </div>
</form>
{% if book %}
<form id="delete-form" action="/delete/{{ book.id }}" method="POST" style="display:none;"></form>
{% endif %}
{% endblock %}